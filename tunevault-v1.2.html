<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéª TuneVault - Old Time Tune Library</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --bg-primary: #0a0a0f; --bg-secondary: #12121a; --bg-card: rgba(255,255,255,0.03); --text-primary: #e8e4dc; --text-secondary: #7a756c; --accent: #c9a227; --border: rgba(201, 162, 39, 0.15); }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Georgia', serif; background: var(--bg-primary); min-height: 100vh; color: var(--text-primary); padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        header { text-align: center; padding: 30px 0 20px; }
        h1 { font-size: 2.5rem; color: var(--accent); letter-spacing: 4px; }
        .tagline { color: var(--text-secondary); font-style: italic; margin-bottom: 20px; }
        
        .tip-btn { display: inline-block; padding: 10px 20px; background: linear-gradient(135deg, #ff6b6b, #ff8e53); color: white; text-decoration: none; border-radius: 20px; font-weight: bold; margin-bottom: 20px; }
        
        .search-box { background: var(--bg-card); padding: 15px; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 15px; }
        .search-box input { width: 100%; padding: 12px; font-size: 1rem; border: 2px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary); }
        
        .filters { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .filter-group { background: var(--bg-card); padding: 10px; border-radius: 8px; border: 1px solid var(--border); }
        .filter-group select { width: 100%; padding: 8px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 5px; color: var(--text-primary); }
        
        .stats { padding: 12px; background: rgba(201,162,39,0.1); border-radius: 10px; margin-bottom: 15px; text-align: center; color: var(--accent); }
        
        .tune-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
        .tune-card { background: var(--bg-card); border-radius: 10px; border: 1px solid var(--border); padding: 15px; cursor: pointer; transition: 0.3s; }
        .tune-card:hover { border-color: var(--accent); transform: translateY(-2px); }
        .tune-card h3 { color: var(--accent); font-size: 1rem; margin-bottom: 5px; }
        .tune-card .region { color: var(--text-secondary); font-size: 0.75rem; margin-bottom: 8px; }
        .tune-meta .tag { padding: 2px 6px; background: rgba(201,162,39,0.1); border-radius: 8px; font-size: 0.65rem; color: var(--text-secondary); margin-right: 5px; }
        
        .detail-view { display: none; }
        .detail-view.active { display: block; }
        .back-btn { background: transparent; border: 1px solid var(--accent); color: var(--accent); padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-bottom: 15px; }
        
        .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; border: 2px solid var(--accent); margin-bottom: 15px; background: #000; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        
        .detail-header { background: rgba(201,162,39,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--border); }
        .detail-header h2 { color: var(--accent); font-size: 1.5rem; }
        
        .source-link { display: block; padding: 10px; background: var(--bg-card); border-radius: 6px; margin-bottom: 8px; text-decoration: none; color: var(--text-primary); border: 1px solid var(--border); }
        .source-link:hover { border-color: var(--accent); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéª TUNEVAULT</h1>
            <p class="tagline">Your old time tune treasure trove</p>
            <a href="https://ko-fi.com/headspacedesignstudio" target="_blank" class="tip-btn">‚òï Support</a>
        </header>
        
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search tunes..." onkeyup="if(event.key==='Enter')doSearch()">
        </div>
        
        <div class="filters">
            <select id="sourceFilter" onchange="applyFilters()">
                <option value="">All Regions</option>
                <option value="appalachian">Appalachian</option>
                <option value="kentucky">Kentucky</option>
                <option value="tennessee">Tennessee</option>
            </select>
            <select id="difficultyFilter" onchange="applyFilters()">
                <option value="">All Levels</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
            </select>
        </div>
        
        <div class="stats" id="stats"><strong>10</strong> tunes</div>
        
        <div class="tune-grid" id="tuneGrid"></div>
        
        <div class="detail-view" id="detailView">
            <button class="back-btn" onclick="showLibrary()">‚Üê Back</button>
            <div class="detail-header"><h2 id="detailName"></h2region" id="detailRegion"></p></div>
            
            <!-- YouTube Video - opens in overlay, stays in app -->
            <div class="video-wrapper">
                <iframe id="ytPlayer" src="" frameborder="0" allow="accelerometer; autoplay; fullscreen" allowfullscreen></iframe>
            </div>
            
            <div class="tune-meta" id="detailMeta" style="margin-bottom: 15px;"></div>
            
            <div class="detail-section">
                <div id="detailLinks"></div>
            </div>
        </div>
    </div>
    
    <script>
const tuneVideos = {
    "Old Joe Clark": "vhI7d0dqW_jk",
    "Cripple Creek": "hCZ0k_XwqZo",
    "June Apple": "K0V6xvdRZ4U"
};

const tuneDatabase = [
{ name: "Old Joe Clark", region: "Appalachian", keys: ["A", "G"], difficulty: "Beginner" },
{ name: "Cripple Creek", region: "Virginia", keys: ["G"], difficulty: "Beginner" },
{ name: "Arkansas Traveler", region: "Arkansas", keys: ["D", "A"], difficulty: "Intermediate" },
{ name: "Salt River", region: "Kentucky", keys: ["D", "A"], difficulty: "Intermediate" },
{ name: "Bill Cheatham", region: "Tennessee", keys: ["A", "D"], difficulty: "Intermediate" },
{ name: "June Apple", region: "Virginia", keys: ["A", "D"], difficulty: "Intermediate" },
{ name: "Cluck Old Hen", region: "Georgia", keys: ["A", "G"], difficulty: "Intermediate" },
{ name: "Turkey in the Straw", region: "American", keys: ["G", "D"], difficulty: "Beginner" },
{ name: "Wildwood Flower", region: "Appalachian", keys: ["G", "C"], difficulty: "Beginner" },
{ name: "Liberty", region: "Tennessee", keys: ["D", "A"], difficulty: "Intermediate" }
];

function displayTunes(tunes) {
    document.getElementById('tuneGrid').innerHTML = tunes.map(tune => {
        const hasVid = tuneVideos[tune.name] ? 'üéµ' : '';
        return '<div class="tune-card" onclick="showTune(\''+tune.name.replace(/'/g,"\\'")+'\')"><h3>'+tune.name+' '+hasVid+'</h3><p class="region">'+tune.region+'</p><div class="tune-meta"><span class="tag">'+tune.keys.join(',')+'</span><span class="tag">'+tune.difficulty+'</span></div></div>';
    }).join('');
    document.getElementById('stats').innerHTML = '<strong>'+tunes.length+'</strong> tunes';
}

function doSearch() {
    const q = document.getElementById('searchInput').value.toLowerCase();
    const r = tuneDatabase.filter(t => t.name.toLowerCase().includes(q) || t.region.toLowerCase().includes(q));
    displayTunes(r);
}

function applyFilters() {
    let f = tuneDatabase;
    const s = document.getElementById('sourceFilter').value;
    const d = document.getElementById('difficultyFilter').value;
    if (s) f = f.filter(t => t.region.toLowerCase().includes(s));
    if (d) f = f.filter(t => t.difficulty.toLowerCase() === d);
    displayTunes(f);
}

function showTune(name) {
    const tune = tuneDatabase.find(t => t.name === name);
    document.getElementById('detailName').textContent = tune.name;
    document.getElementById('detailRegion').textContent = tune.region;
    document.getElementById('detailMeta').innerHTML = tune.keys.map(k => '<span class="tag">'+k+'</span>').join('') + ' <span class="tag">'+tune.difficulty+'</span>';
    
    // Embed YouTube - using watch?v= instead of embed for better compatibility
    const vid = tuneVideos[tune.name];
    if (vid) {
        document.getElementById('ytPlayer').src = 'https://www.youtube.com/embed/' + vid + '?autoplay=1&rel=0';
    } else {
        // Fall back to search
        document.getElementById('ytPlayer').src = 'https://www.youtube.com/results?search_query=' + encodeURIComponent(tune.name + ' old time fiddle');
    }
    
    document.getElementById('detailLinks').innerHTML = 
        '<a href="https://www.youtube.com/results?search_query='+encodeURIComponent(tune.name)+'+old+time+fiddle" target="_blank" class="source-link">üé• More Videos on YouTube</a>';
    
    document.getElementById('tuneGrid').style.display = 'none';
    document.getElementById('detailView').classList.add('active');
}

function showLibrary() {
    document.getElementById('ytPlayer').src = '';
    document.getElementById('detailView').classList.remove('active');
    document.getElementById('tuneGrid').style.display = 'grid';
}

displayTunes(tuneDatabase);
    </script>
</body>
</html>
